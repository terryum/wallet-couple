# Product Requirement Document (PRD): Wallet Card Dashboard

## 1. 개요 (Overview)
* **프로젝트명:** wallet_card_dashboard
* **버전:** v2.3 (Phase 17 완료)
* **작성일:** 2025-12-26 (최종 업데이트: 2025-12-31)
* **목적:** 파편화된 부부의 금융 결제 내역(카드, 은행, 지역화폐)을 통합하여 월별 가계 현황을 정확하게 파악하고 분석하기 위함.
* **타겟 유저:** 가계부를 관리하는 본인 및 배우자 (2인. 2인의 원본내역이 구분 가능해야 함)
* **플랫폼:** 모바일 웹 (Mobile Web) + PWA 지원
* **배포 URL:** https://wallet-terry-lynn.vercel.app

> **관련 문서:** [`Current_Status.md`](./Current_Status.md), [`CLAUDE.md`](./CLAUDE.md)

## 2. 제품의 핵심 가치 (Product Principles)
1.  **데이터의 완전성 (Completeness):** 자동 연동의 누락을 방지하기 위해 사용자가 직접 명세서를 업로드하여 모든 지출 내역을 포함한다.
2.  **유연한 편집 (Flexibility):** AI가 1차 분류를 하되, 최종 검증 및 수정 권한은 사용자에게 부여한다 (특히 단순 이체 내역 삭제 등).
3.  **직관적인 시각화 (Visualization):** 복잡한 내역을 카테고리별/월별로 시각화하여 한눈에 흐름을 파악하게 한다.

## 3. 주요 기능 명세 (Functional Requirements)

### 3.1. 데이터 수집 (Data Ingestion)
* **업로드 지원 대상:**
    * **신용카드:** 현대카드, 롯데카드, 삼성카드, KB국민카드, 토스뱅크카드 등 (월별 이용대금명세서 PDF/Excel)
    * **지역화폐:** 온누리상품권, 성남사랑상품권 (이용내역)
    * **은행:** 주요 입출금 통장 거래내역
* **기능 요건:**
    * 다양한 포맷의 파일을 파싱하여 표준화된 데이터 포맷(날짜, 가맹점명, 금액, 1차 카테고리)으로 변환해야 한다.
    * 매월 데이터를 추가로 업로드할 수 있어야 한다.

### 3.2. 데이터 관리 및 보정 (Data Management Table)
* **개요:** 업로드된 원본 데이터를 확인하고 정제하는 '테이블 뷰' 화면.
* **기능 요건:**
    * **CRUD 지원:** 각 행(Row)에 대해 수정(Edit), 삭제(Delete), 수동 추가(Add)가 가능해야 한다.
    * **카테고리 수정:** AI 또는 시스템이 1차 분류한 카테고리(식음료, 쇼핑, 통신비 등)를 사용자가 드롭다운 등을 통해 쉽게 수정할 수 있어야 한다.
    * **내부 거래 삭제:** 통장 간 이체 등 지출/수입이 아닌 내역은 'X' 버튼(혹은 스와이프) 등을 통해 즉시 삭제(제외 처리)할 수 있어야 한다.
    * **필터링/정렬:** 날짜순, 금액순, 카테고리별 정렬 및 보기를 지원해야 한다.

### 3.3. 대시보드 및 분석 (Dashboard & Analytics)
* **개요:** 정제된 데이터를 바탕으로 인사이트를 제공하는 화면.
* **기능 요건:**
    * **월별 현황:** 특정 월(Month)을 선택하면 총 지출액과 수입액을 보여준다.
    * **카테고리별 분석:** 식음료, 쇼핑, 교통, 통신 등 카테고리별 지출 비중(Pie Chart)과 금액을 보여준다.
    * **추세 분석 (Trend):** 전월 대비 지출 변화량, 최근 6개월간의 지출 추이(Line Chart)를 보여준다.

## 4. 정보 구조 (Information Architecture)
이 프로젝트는 크게 두 가지 핵심 뷰로 구성된다. 상세 내용은 별도 PRD 참조.

1.  **입력 및 관리 (Input & Management) - `PRD_wallet_front.md`에서 상세화**
    * 파일 업로드 UI
    * 데이터 그리드(테이블) UI
    * 행 추가/수정/삭제 인터랙션
2.  **분석 및 로직 (Analysis & Logic) - `PRD_wallet_back.md`에서 상세화**
    * 데이터 파싱 로직
    * 카테고리 자동 분류 알고리즘
    * 데이터베이스 스키마 및 집계 쿼리

## 5. 비기능 요구사항 (Non-Functional Requirements)
* **반응형 웹:** 모바일 사용을 최우선으로 하되, PC에서도 깨지지 않고 보여야 한다.
* **데이터 처리 속도:** 파일 업로드 시 파싱 및 1차 분류가 10초 이내에 완료되어야 한다.
* **보안:** 개인 금융 정보이므로 데이터베이스 접근 제어 및 기본적인 보안 수칙을 준수한다.

## 6. 마일스톤 및 참조 문서 (References)
| 문서 | 설명 |
|-----|------|
| `PRD_wallet.md` (본 문서) | 전체 프로젝트의 방향성 정의 |
| [`PRD_wallet_back.md`](./PRD_wallet_back.md) | 데이터 파싱, DB 구조, 분석 로직 상세 |
| [`PRD_wallet_ux.md`](./PRD_wallet_ux.md) | 사용자 인터랙션, 모달 흐름, 제스처 정의 |
| [`PRD_wallet_dataloader.md`](./PRD_wallet_dataloader.md) | 카드사/은행별 데이터 로더 명세 |
| [`CATEGORIES.md`](./CATEGORIES.md) | 카테고리 정의 및 수정 가이드 |
| [`Current_Status.md`](./Current_Status.md) | 현재 개발 진행 상황 |

## 7. 구현 현황 (Implementation Status)

### 완료된 기능 ✅
| 기능 | 설명 | 상태 |
|------|------|------|
| 파일 업로드 | 6개 소스 지원 (현대/롯데/삼성/KB카드, 온누리/성남상품권) | ✅ |
| AI 분류 | Claude API 기반 자동 카테고리 분류 | ✅ |
| 거래 편집 | EditModal, SimilarTransactionsModal | ✅ |
| 차트 분석 | 도넛 차트(지출 비중), 스택 바(지출 변화) | ✅ |
| PWA | 홈 화면 설치, 오프라인 캐싱 | ✅ |
| 매핑 관리 | 카테고리/이용처 매핑 확인 및 수정 | ✅ |
| 파일 관리 | 업로드 파일 목록, 다운로드, 삭제 | ✅ |

### 지원 카드사/은행/상품권
- **카드:** 현대카드, 롯데카드, 삼성카드, KB국민카드
- **은행:** 우리은행 (소득/지출 통합 지원)
- **상품권:** 온누리상품권, 성남사랑상품권(암호화 지원)